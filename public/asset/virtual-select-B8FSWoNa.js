/*!
 * Virtual Select v1.0.45
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(function(){(function(){function U(n){return J(n)||E(n)||Oe(n)||ie()}function ie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(n,i){if(n){if(typeof n=="string")return oe(n,i);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oe(n,i)}}function E(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function J(n){if(Array.isArray(n))return oe(n)}function oe(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=new Array(i);e<i;e++)t[e]=n[e];return t}function q(n){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},q(n)}function ve(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function $(n,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,D(t.key),t)}}function x(n,i,e){return e&&$(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function D(n){var i=u(n,"string");return q(i)==="symbol"?i:String(i)}function u(n,i){if(q(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,i);if(q(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var d=function(){function n(){ve(this,n)}return x(n,null,[{key:"getString",value:function(e){return e||e===0?e.toString():""}},{key:"convertToBoolean",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o;return e===!0||e==="true"?o=!0:e===!1||e==="false"?o=!1:o=t,o}},{key:"isEmpty",value:function(e){var t=!1;return e?Array.isArray(e)?e.length===0&&(t=!0):q(e)==="object"&&Object.keys(e).length===0&&(t=!0):t=!0,t}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"removeItemFromArray",value:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!Array.isArray(e)||!e.length)return e;var s=o?U(e):e,r=s.indexOf(t);return r!==-1&&s.splice(r,1),s}},{key:"removeArrayEmpty",value:function(e){return!Array.isArray(e)||!e.length?[]:e.filter(function(t){return!!t})}},{key:"getRandomInt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Math.ceil(t),s=Math.floor(e);return Math.floor(Math.random()*(s-o-1))+o}},{key:"regexEscape",value:function(e){var t=/[-/\\^$*+?.()|[\]{}]/g;return e.replace(t,"\\$&")}},{key:"normalizeString",value:function(e){var t=/[^\w]/g;return e.normalize("NFD").replace(t,"")}},{key:"willTextOverflow",value:function(e,t){var o=document.createElement("div");o.style.position="absolute",o.style.visibility="hidden",o.style.whiteSpace="nowrap",o.style.fontSize=window.getComputedStyle(e).fontSize,o.style.fontFamily=window.getComputedStyle(e).fontFamily,o.textContent=t,document.body.appendChild(o);var s=o.clientWidth;return document.body.removeChild(o),s>e.clientWidth}},{key:"replaceDoubleQuotesWithHTML",value:function(e){return e.replace(/"/g,"&quot;")}},{key:"containsHTML",value:function(e){return/<[a-z][\s\S]*>/i.test(e)}}]),n}();function k(n){"@babel/helpers - typeof";return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},k(n)}function V(n,i){return b(n)||L(n,i)||v(n,i)||_()}function _(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(n,i){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t,o,s,r,l=[],p=!0,y=!1;try{if(s=(e=e.call(n)).next,i!==0)for(;!(p=(t=s.call(e)).done)&&(l.push(t.value),l.length!==i);p=!0);}catch(g){y=!0,o=g}finally{try{if(!p&&e.return!=null&&(r=e.return(),Object(r)!==r))return}finally{if(y)throw o}}return l}}function b(n){if(Array.isArray(n))return n}function h(n){return f(n)||a(n)||v(n)||m()}function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(n,i){if(n){if(typeof n=="string")return O(n,i);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O(n,i)}}function a(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function f(n){if(Array.isArray(n))return O(n)}function O(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=new Array(i);e<i;e++)t[e]=n[e];return t}function A(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function G(n,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,X(t.key),t)}}function H(n,i,e){return e&&G(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function X(n){var i=j(n,"string");return k(i)==="symbol"?i:String(i)}function j(n,i){if(k(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,i);if(k(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var c=function(){function n(){A(this,n)}return H(n,null,[{key:"addClass",value:function(e,t){if(e){var o=t.split(" ");n.getElements(e).forEach(function(s){var r;(r=s.classList).add.apply(r,h(o))})}}},{key:"removeClass",value:function(e,t){if(e){var o=t.split(" ");n.getElements(e).forEach(function(s){var r;(r=s.classList).remove.apply(r,h(o))})}}},{key:"toggleClass",value:function(e,t,o){if(e){var s;o!==void 0&&(s=!!o),n.getElements(e).forEach(function(r){r.classList.toggle(t,s)})}}},{key:"hasClass",value:function(e,t){return e?e.classList.contains(t):!1}},{key:"hasEllipsis",value:function(e){return e?e.scrollWidth>e.offsetWidth:!1}},{key:"getData",value:function(e,t,o){if(e){var s=e?e.dataset[t]:"";return o==="number"?s=parseFloat(s)||0:s==="true"?s=!0:s==="false"&&(s=!1),s}}},{key:"setData",value:function(e,t,o){e&&(e.dataset[t]=o)}},{key:"setAttr",value:function(e,t,o){e&&e.setAttribute(t,o)}},{key:"setAttrFromEle",value:function(e,t,o,s){var r={};o.forEach(function(l){r[l]=e.getAttribute(l)}),o.forEach(function(l){var p=r[l];(p||s.indexOf(l)!==-1&&p==="")&&t.setAttribute(l,p)})}},{key:"setStyle",value:function(e,t,o){e&&(e.style[t]=o)}},{key:"setStyles",value:function(e,t){!e||!t||Object.keys(t).forEach(function(o){e.style[o]=t[o]})}},{key:"setAria",value:function(e,t,o){var s=t;s!=="role"&&(s="aria-".concat(s)),e.setAttribute(s,o)}},{key:"getElements",value:function(e){return e?e.forEach===void 0?[e]:e:[]}},{key:"getElementsBySelector",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,o,s=t!==void 0?t:document;return e!==""&&(o=s.querySelectorAll(e)),o!==void 0?Array.from(o):[]}},{key:"addEvent",value:function(e,t,o){if(e){var s=d.removeArrayEmpty(t.split(" "));s.forEach(function(r){var l=n.getElements(e);l.forEach(function(p){p.addEventListener(r,o)})})}}},{key:"dispatchEvent",value:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e){var s=n.getElements(e);setTimeout(function(){s.forEach(function(r){r.dispatchEvent(new CustomEvent(t,{bubbles:o}))})},0)}}},{key:"getAttributesText",value:function(e){var t="";return e&&Object.entries(e).forEach(function(o){var s=V(o,2),r=s[0],l=s[1];l!==void 0&&(t+=" ".concat(r,'="').concat(l,'" '))}),t}},{key:"convertPropToDataAttr",value:function(e){return e?"data-".concat(e).replace(/([A-Z])/g,"-$1").toLowerCase():""}},{key:"changeTabIndex",value:function(e,t){if(!e){console.log(e,"Invalid element provided.");return}n.getElements(e).forEach(function(o){o.tabIndex=t})}},{key:"removeEvent",value:function(e,t,o){if(e){var s=n.getElements(e);s.forEach(function(r){r.removeEventListener(t,o)})}}}]),n}();function B(n,i){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);i&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,t)}return e}function ye(n){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?B(Object(e),!0).forEach(function(t){P(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):B(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function P(n,i,e){return i=xe(i),i in n?Object.defineProperty(n,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[i]=e,n}function M(n){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},M(n)}function F(n,i){return Ae(n)||Ee(n,i)||se(n,i)||le()}function le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ee(n,i){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var t,o,s,r,l=[],p=!0,y=!1;try{if(s=(e=e.call(n)).next,i!==0)for(;!(p=(t=s.call(e)).done)&&(l.push(t.value),l.length!==i);p=!0);}catch(g){y=!0,o=g}finally{try{if(!p&&e.return!=null&&(r=e.return(),Object(r)!==r))return}finally{if(y)throw o}}return l}}function Ae(n){if(Array.isArray(n))return n}function z(n){return ue(n)||be(n)||se(n)||me()}function me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(n,i){if(n){if(typeof n=="string")return ne(n,i);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ne(n,i)}}function be(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ue(n){if(Array.isArray(n))return ne(n)}function ne(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=new Array(i);e<i;e++)t[e]=n[e];return t}function pe(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function Se(n,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,xe(t.key),t)}}function Te(n,i,e){return i&&Se(n.prototype,i),e&&Se(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function xe(n){var i=$e(n,"string");return M(i)==="symbol"?i:String(i)}function $e(n,i){if(M(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,i);if(M(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var ce=48,he=40,Pe={13:"onEnterPress",38:"onUpArrowPress",40:"onDownArrowPress",46:"onBackspaceOrDeletePress",8:"onBackspaceOrDeletePress"},De=["autofocus","disabled","multiple","required"],Q=["autofocus","class","disabled","id","multiple","name","placeholder","required"],ge,Me=["additionalClasses","additionalDropboxClasses","additionalDropboxContainerClasses","additionalToggleButtonClasses","aliasKey","allOptionsSelectedText","allowNewOption","alwaysShowSelectedOptionsCount","alwaysShowSelectedOptionsLabel","ariaLabelledby","ariaLabelText","ariaLabelClearButtonText","autoSelectFirstOption","clearButtonText","descriptionKey","disableAllOptionsSelectedText","disableOptionGroupCheckbox","disableSelectAll","disableValidation","dropboxWidth","dropboxWrapper","emptyValue","enableSecureText","focusSelectedOptionOnOpen","hasOptionDescription","hideClearButton","hideValueTooltipOnSelectAll","keepAlwaysOpen","labelKey","markSearchResults","maxValues","maxWidth","minValues","moreText","noOfDisplayValues","noOptionsText","noSearchResultsText","optionHeight","optionSelectedText","optionsCount","optionsSelectedText","popupDropboxBreakpoint","popupPosition","position","search","searchByStartsWith","searchDelay","searchFormLabel","searchGroup","searchNormalize","searchPlaceholderText","selectAllOnlyVisible","selectAllText","setValueAsArray","showDropboxAsPopup","showOptionsOnlyOnSearch","showSelectedOptionsFirst","showValueAsTags","silentInitialValueSet","textDirection","tooltipAlignment","tooltipFontSize","tooltipMaxWidth","updatePositionThrottle","useGroupValue","valueKey","zIndex"],we=function(){function n(i){pe(this,n);try{this.createSecureTextElements(),this.setProps(i),this.setDisabledOptions(i.disabledOptions),this.setOptions(i.options),this.render()}catch(e){console.warn("Couldn't initiate Virtual Select"),console.error(e)}}return Te(n,[{key:"render",value:function(){if(this.$ele){var e=this.uniqueId,t="vscomp-wrapper",o="vscomp-toggle-button",s=this.showValueAsTags?"":this.getTooltipAttrText(this.placeholder,!0,!0),r=this.getTooltipAttrText(this.clearButtonText),l=this.ariaLabelledby?'aria-labelledby="'.concat(this.ariaLabelledby,'"'):"",p=this.ariaLabelText?'aria-label="'.concat(this.ariaLabelText,'"'):"",y=this.ariaLabelClearButtonText?'aria-label="'.concat(this.ariaLabelClearButtonText,'"'):"",g=!1;this.additionalClasses&&(t+=" ".concat(this.additionalClasses)),this.additionalToggleButtonClasses&&(o+=" ".concat(this.additionalToggleButtonClasses)),this.multiple&&(t+=" multiple",this.disableSelectAll||(t+=" has-select-all")),this.hideClearButton||(t+=" has-clear-button"),this.keepAlwaysOpen?(t+=" keep-always-open",g=!0):t+=" closed",this.showAsPopup&&(t+=" show-as-popup"),this.hasSearch&&(t+=" has-search-input"),this.showValueAsTags&&(t+=" show-value-as-tags"),this.textDirection&&(t+=" text-direction-".concat(this.textDirection)),this.popupPosition&&(t+=" popup-position-".concat(this.popupPosition.toLowerCase()));var S='<div id="vscomp-ele-wrapper-'.concat(e,'" class="vscomp-ele-wrapper ').concat(t,`" tabindex="0"
        role="combobox" aria-haspopup="listbox" aria-controls="vscomp-dropbox-container-`).concat(e,`"
        aria-expanded="`).concat(g,'" ').concat(l," ").concat(p,`>
        <input type="hidden" name="`).concat(this.name,`" class="vscomp-hidden-input">
        <div class="`).concat(o,`">
          <div class="vscomp-value" `).concat(s,`>
            `).concat(this.placeholder,`
          </div>
          <div class="vscomp-arrow"></div>
          <div class="vscomp-clear-button toggle-button-child" `).concat(r,` 
          tabindex="0" `).concat(y,`>
            <i class="vscomp-clear-icon"></i>
          </div>
        </div>

        `).concat(this.renderDropbox({wrapperClasses:t}),`
      </div>`);this.$ele.innerHTML=S,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.hasDropboxWrapper?(this.$allWrappers=[this.$wrapper,this.$dropboxWrapper],this.$dropboxContainer=this.$dropboxWrapper.querySelector(".vscomp-dropbox-container"),c.addClass(this.$dropboxContainer,"pop-comp-wrapper")):(this.$allWrappers=[this.$wrapper],this.$dropboxContainer=this.$wrapper.querySelector(".vscomp-dropbox-container")),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$dropbox=this.$dropboxContainer.querySelector(".vscomp-dropbox"),this.$dropboxCloseButton=this.$dropboxContainer.querySelector(".vscomp-dropbox-close-button"),this.$dropboxContainerBottom=this.$dropboxContainer.querySelector(".vscomp-dropbox-container-bottom"),this.$dropboxContainerTop=this.$dropboxContainer.querySelector(".vscomp-dropbox-container-top"),this.$search=this.$dropboxContainer.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxContainer.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxContainer.querySelector(".vscomp-options-list"),this.$options=this.$dropboxContainer.querySelector(".vscomp-options"),this.$noOptions=this.$dropboxContainer.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxContainer.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderDropbox",value:function(e){var t=e.wrapperClasses,o=this.dropboxWrapper!=="self"?document.querySelector(this.dropboxWrapper):null,s="vscomp-dropbox";this.additionalDropboxClasses&&(s+=" ".concat(this.additionalDropboxClasses));var r="vscomp-dropbox-container";this.additionalDropboxContainerClasses&&(r+=" ".concat(this.additionalDropboxContainerClasses));var l='<div id="vscomp-dropbox-container-'.concat(this.uniqueId,'" role="listbox" class="').concat(r,`">
        <div class="vscomp-dropbox-container-top" aria-hidden="true" tabindex="0">&nbsp;</div>
        <div class="`).concat(s,`">
          <div class="vscomp-search-wrapper"></div>

          <div class="vscomp-options-container">
            <div class="vscomp-options-loader"></div>

            <div class="vscomp-options-list">
              <div class="vscomp-options"></div>
            </div>
          </div>

          <div class="vscomp-options-bottom-freezer"></div>
          <div class="vscomp-no-options">`).concat(this.noOptionsText,`</div>
          <div class="vscomp-no-search-results">`).concat(this.noSearchResultsText,`</div>

          <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>
        </div>
        <div class="vscomp-dropbox-container-bottom" aria-hidden="true" tabindex="0">&nbsp;</div>
      </div>`);if(o){var p=document.createElement("div");return this.$dropboxWrapper=p,this.hasDropboxWrapper=!0,p.innerHTML=l,o.appendChild(p),c.addClass(p,"vscomp-dropbox-wrapper ".concat(t)),""}return this.hasDropboxWrapper=!1,l}},{key:"renderOptions",value:function(){var e=this,t="",o=this.getVisibleOptions(),s="",r="",l=!!(this.markSearchResults&&this.searchValue),p,y=this.labelRenderer,g=this.disableOptionGroupCheckbox,S=this.uniqueId,w=this.searchGroup,C=typeof y=="function",N=d.convertToBoolean,R="";if(l&&(p=new RegExp("(".concat(d.regexEscape(this.searchValue),")(?!([^<]+)?>)"),"gi")),this.multiple&&(s='<span class="checkbox-icon"></span>'),this.allowNewOption){var fe=this.getTooltipAttrText("New Option");r='<span class="vscomp-new-option-icon" '.concat(fe,"></span>")}o.forEach(function(T){var re=T.index,Y,W="vscomp-option",ee=e.getTooltipAttrText("",!0,!0),K=s,I="",te="",ae="",de="",ke="-1",Ce=N(T.isSelected),Z="";if(T.classNames&&(W+=" ".concat(T.classNames)),T.isFocused&&(ke="0",W+=" focused"),T.isDisabled&&(W+=" disabled",Z='aria-disabled="true"'),T.isGroupTitle&&(R=T.label,W+=" group-title",g&&(K="")),Ce&&(W+=" selected"),T.isGroupOption){var Ve="";W+=" group-option",ae='data-group-index="'.concat(T.groupIndex,'"'),T.customData?(R=T.customData.group_name!==void 0?"".concat(T.customData.group_name,", "):"",Ve=T.customData.description!==void 0?" ".concat(T.customData.description,","):"",de='aria-label="'.concat(R," ").concat(T.label,", ").concat(Ve,'"')):de='aria-label="'.concat(R,", ").concat(T.label,'"')}C?Y=y(T):Y=T.label,T.description&&(te='<div class="vscomp-option-description" '.concat(ee,">").concat(T.description,"</div>")),T.isCurrentNew?(W+=" current-new",I+=r):l&&(!T.isGroupTitle||w)&&(Y=Y.replace(p,"<mark>$1</mark>")),t+='<div role="option" aria-selected="'.concat(Ce,'" id="vscomp-option-').concat(S,"-").concat(re,`"
          class="`).concat(W,'" data-value="').concat(T.value,'" data-index="').concat(re,'" data-visible-index="').concat(T.visibleIndex,`"
          tabindex=`).concat(ke," ").concat(ae," ").concat(Z," ").concat(de,`
        >
          `).concat(K,`
          <span class="vscomp-option-text" `).concat(ee,`>
            `).concat(Y,`
          </span>
          `).concat(te,`
          `).concat(I,`
        </div>`)}),R="",this.$options.innerHTML=t,this.$visibleOptions=this.$options.querySelectorAll(".vscomp-option"),this.afterRenderOptions()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var e="",t="";this.multiple&&!this.disableSelectAll&&(e=`<span class="vscomp-toggle-all-button">
          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>
          <span class="vscomp-toggle-all-label">`.concat(this.selectAllText,`</span>
        </span>`)),this.hasSearch&&(t='<label for="vscomp-search-input-'.concat(this.uniqueId,`" class="vscomp-search-label"
        id="vscomp-search-label-`).concat(this.uniqueId,`"
      >
        `).concat(this.searchFormLabel,`
      </label>
      <input type="text" class="vscomp-search-input" placeholder="`).concat(this.searchPlaceholderText,`"
        id="vscomp-search-input-`).concat(this.uniqueId,`">
      <span class="vscomp-search-clear">&times;</span>`));var o=`<div class="vscomp-search-container">
        `.concat(e,`
        `).concat(t,`
      </div>`);this.$search.innerHTML=o,this.$searchInput=this.$dropboxContainer.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxContainer.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxContainer.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxContainer.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"input","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions"),this.addEvent(this.$dropboxContainerBottom,"focus","onDropboxContainerTopOrBottomFocus"),this.addEvent(this.$dropboxContainerTop,"focus","onDropboxContainerTopOrBottomFocus")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$allWrappers,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click keydown","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove"),this.addMutationObserver()}},{key:"addEvent",value:function(e,t,o){var s=this;if(e){var r=d.removeArrayEmpty(t.split(" "));r.forEach(function(l){var p="".concat(o,"-").concat(l),y=s.events[p];y||(y=s[o].bind(s),s.events[p]=y),c.addEvent(e,l,y)})}}},{key:"removeEvents",value:function(){this.removeEvent(document,"click","onDocumentClick"),this.removeEvent(this.$allWrappers,"keydown","onKeyDown"),this.removeEvent(this.$toggleButton,"click","onToggleButtonClick"),this.removeEvent(this.$clearButton,"click keydown","onClearButtonClick"),this.removeEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.removeEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.removeEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.removeEvent(this.$options,"click","onOptionsClick"),this.removeEvent(this.$options,"mouseover","onOptionsMouseOver"),this.removeEvent(this.$options,"touchmove","onOptionsTouchMove"),this.removeMutationObserver()}},{key:"removeEvent",value:function(e,t,o){var s=this;if(e){var r=d.removeArrayEmpty(t.split(" "));r.forEach(function(l){var p="".concat(o,"-").concat(l),y=s.events[p];y&&c.removeEvent(e,l,y)})}}},{key:"onDocumentClick",value:function(e){var t=e.target.closest(".vscomp-wrapper");t!==this.$wrapper&&t!==this.$dropboxWrapper&&this.isOpened()&&this.closeDropbox()}},{key:"onKeyDown",value:function(e){var t=e.which||e.keyCode,o=Pe[t];if(document.activeElement===this.$searchInput&&e.shiftKey&&t===9){e.preventDefault(),this.keepAlwaysOpen?this.$dropboxContainerTop.focus():this.closeDropbox();return}if(document.activeElement===this.$searchInput&&t===9){e.preventDefault(),this.focusFirstVisibleOption();return}if(t===27||e.key==="Escape"){var s=this.showAsPopup?this.$wrapper:this.$dropboxWrapper;if((document.activeElement===s||s.contains(document.activeElement))&&!this.keepAlwaysOpen){this.closeDropbox();return}}o&&this[o](e)}},{key:"onEnterPress",value:function(e){e.preventDefault(),this.isOpened()?this.selectFocusedOption():this.$ele.disabled===!1&&this.openDropbox()}},{key:"onDownArrowPress",value:function(e){e.preventDefault(),this.isOpened()?this.focusOption({direction:"next"}):this.openDropbox()}},{key:"onUpArrowPress",value:function(e){e.preventDefault(),this.isOpened()?this.focusOption({direction:"previous"}):this.openDropbox()}},{key:"onBackspaceOrDeletePress",value:function(e){e.target===this.$wrapper&&(e.preventDefault(),this.selectedValues.length>0&&this.reset())}},{key:"onToggleButtonClick",value:function(e){var t=e.target;t.closest(".vscomp-value-tag-clear-button")?this.removeValue(t.closest(".vscomp-value-tag")):t.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(e){e.type==="click"?this.reset():e.type==="keydown"&&(e.code==="Enter"||e.code==="Space")&&(e.stopPropagation(),this.reset())}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(e){var t=e.target.closest(".vscomp-option");t&&!c.hasClass(t,"disabled")&&(c.hasClass(t,"group-title")?this.onGroupTitleClick(t):this.selectOption(t,{event:e}))}},{key:"onGroupTitleClick",value:function(e){if(!(!e||!this.multiple||this.disableOptionGroupCheckbox)){var t=!c.hasClass(e,"selected");this.toggleGroupTitleCheckbox(e,t),this.toggleGroupOptions(e,t)}}},{key:"onDropboxContainerClick",value:function(e){e.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(e){var t=e.target.closest(".vscomp-option");t&&this.isOpened()&&(c.hasClass(t,"disabled")||c.hasClass(t,"group-title")?this.removeOptionFocus():this.focusOption({$option:t}))}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(e){e.stopPropagation(),this.setSearchValue(e.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onDropboxContainerTopOrBottomFocus",value:function(){this.closeDropbox()}},{key:"onResize",value:function(){this.setOptionsContainerHeight(!0)}},{key:"addMutationObserver",value:function(){var e=this;if(this.hasDropboxWrapper){var t=this.$ele;this.mutationObserver=new MutationObserver(function(o){var s=!1,r=!1;o.forEach(function(l){s||(s=z(l.addedNodes).some(function(p){return!!(p===t||p.contains(t))})),r||(r=z(l.removedNodes).some(function(p){return!!(p===t||p.contains(t))}))}),r&&!s&&e.destroy()}),this.mutationObserver.observe(document.querySelector("body"),{childList:!0,subtree:!0})}}},{key:"removeMutationObserver",value:function(){this.mutationObserver.disconnect()}},{key:"beforeValueSet",value:function(e){this.toggleAllOptionsClass(e?!1:void 0)}},{key:"beforeSelectNewValue",value:function(){var e=this,t=this.getNewOption(),o=t.index;this.newValues.push(t.value),this.setOptionProp(o,"isCurrentNew",!1),this.setOptionProp(o,"isNew",!0),setTimeout(function(){e.setSearchValue(""),e.focusSearchInput()},0)}},{key:"afterRenderWrapper",value:function(){c.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setEleStyles(),this.setDropboxStyles(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setEleProps(),!this.keepAlwaysOpen&&!this.showAsPopup&&this.initDropboxPopover(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet),this.showOptionsOnlyOnSearch&&this.setSearchValue("",!1,!0),this.initialDisabled&&this.disable(),this.autofocus&&this.focus()}},{key:"afterRenderOptions",value:function(){var e=this.getVisibleOptions(),t=!this.options.length&&!this.hasServerSearch,o=!t&&!e.length;if((!this.allowNewOption||this.hasServerSearch||this.showOptionsOnlyOnSearch)&&(c.toggleClass(this.$allWrappers,"has-no-search-results",o),o?(c.setAttr(this.$noSearchResults,"tabindex","0"),c.setAttr(this.$noSearchResults,"aria-hidden","false")):(c.setAttr(this.$noSearchResults,"tabindex","-1"),c.setAttr(this.$noSearchResults,"aria-hidden","true"))),c.toggleClass(this.$allWrappers,"has-no-options",t),t?(c.setAttr(this.$noOptions,"tabindex","0"),c.setAttr(this.$noOptions,"aria-hidden","false")):(c.setAttr(this.$noOptions,"tabindex","-1"),c.setAttr(this.$noOptions,"aria-hidden","true")),this.setOptionAttr(),this.setOptionsPosition(),this.setOptionsTooltip(),document.activeElement!==this.$searchInput){var s=c.getElementsBySelector(".focused",this.$dropboxContainer)[0];s!==void 0&&s.focus()}}},{key:"afterSetOptionsContainerHeight",value:function(e){e&&this.showAsPopup&&this.setVisibleOptions()}},{key:"afterSetSearchValue",value:function(){var e=this;this.hasServerSearch?(clearInterval(this.serverSearchTimeout),this.serverSearchTimeout=setTimeout(function(){e.serverSearch()},this.searchDelay)):this.setVisibleOptionsCount(),this.selectAllOnlyVisible&&this.toggleAllOptionsClass(),this.focusOption({focusFirst:!0})}},{key:"afterSetVisibleOptionsCount",value:function(){this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions(),this.updatePosition()}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(e){e&&this.setSelectedProp(),this.setOptionsHeight(),this.setVisibleOptions(),this.showOptionsOnlyOnSearch&&this.setSearchValue("",!1,!0),e||this.reset()}},{key:"setProps",value:function(e){var t=this.setDefaultProps(e);this.setPropsFromElementAttr(t);var o=d.convertToBoolean;this.$ele=t.ele,this.dropboxWrapper=t.dropboxWrapper,this.valueKey=t.valueKey,this.labelKey=t.labelKey,this.descriptionKey=t.descriptionKey,this.aliasKey=t.aliasKey,this.optionHeightText=t.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=o(t.multiple),this.hasSearch=o(t.search),this.searchByStartsWith=o(t.searchByStartsWith),this.searchGroup=o(t.searchGroup),this.hideClearButton=o(t.hideClearButton),this.autoSelectFirstOption=o(t.autoSelectFirstOption),this.hasOptionDescription=o(t.hasOptionDescription),this.silentInitialValueSet=o(t.silentInitialValueSet),this.allowNewOption=o(t.allowNewOption),this.markSearchResults=o(t.markSearchResults),this.showSelectedOptionsFirst=o(t.showSelectedOptionsFirst),this.disableSelectAll=o(t.disableSelectAll),this.keepAlwaysOpen=o(t.keepAlwaysOpen),this.showDropboxAsPopup=o(t.showDropboxAsPopup),this.hideValueTooltipOnSelectAll=o(t.hideValueTooltipOnSelectAll),this.showOptionsOnlyOnSearch=o(t.showOptionsOnlyOnSearch),this.selectAllOnlyVisible=o(t.selectAllOnlyVisible),this.alwaysShowSelectedOptionsCount=o(t.alwaysShowSelectedOptionsCount),this.alwaysShowSelectedOptionsLabel=o(t.alwaysShowSelectedOptionsLabel),this.disableAllOptionsSelectedText=o(t.disableAllOptionsSelectedText),this.showValueAsTags=o(t.showValueAsTags),this.disableOptionGroupCheckbox=o(t.disableOptionGroupCheckbox),this.enableSecureText=o(t.enableSecureText),this.setValueAsArray=o(t.setValueAsArray),this.disableValidation=o(t.disableValidation),this.initialDisabled=o(t.disabled),this.required=o(t.required),this.autofocus=o(t.autofocus),this.useGroupValue=o(t.useGroupValue),this.focusSelectedOptionOnOpen=o(t.focusSelectedOptionOnOpen),this.noOptionsText=t.noOptionsText,this.noSearchResultsText=t.noSearchResultsText,this.selectAllText=t.selectAllText,this.searchNormalize=t.searchNormalize,this.searchPlaceholderText=t.searchPlaceholderText,this.searchFormLabel=t.searchFormLabel,this.optionsSelectedText=t.optionsSelectedText,this.optionSelectedText=t.optionSelectedText,this.allOptionsSelectedText=t.allOptionsSelectedText,this.clearButtonText=t.clearButtonText,this.moreText=t.moreText,this.placeholder=t.placeholder,this.position=t.position,this.textDirection=t.textDirection,this.dropboxWidth=t.dropboxWidth,this.tooltipFontSize=t.tooltipFontSize,this.tooltipAlignment=t.tooltipAlignment,this.tooltipMaxWidth=t.tooltipMaxWidth,this.updatePositionThrottle=t.updatePositionThrottle,this.noOfDisplayValues=parseInt(t.noOfDisplayValues),this.zIndex=parseInt(t.zIndex),this.maxValues=parseInt(t.maxValues),this.minValues=parseInt(t.minValues),this.name=this.secureText(t.name),this.additionalClasses=t.additionalClasses,this.additionalDropboxClasses=t.additionalDropboxClasses,this.additionalDropboxContainerClasses=t.additionalDropboxContainerClasses,this.additionalToggleButtonClasses=t.additionalToggleButtonClasses,this.popupDropboxBreakpoint=t.popupDropboxBreakpoint,this.popupPosition=t.popupPosition,this.onServerSearch=t.onServerSearch,this.labelRenderer=t.labelRenderer,this.selectedLabelRenderer=t.selectedLabelRenderer,this.initialSelectedValue=t.selectedValue===0?"0":t.selectedValue,this.emptyValue=t.emptyValue,this.ariaLabelledby=t.ariaLabelledby,this.ariaLabelText=t.ariaLabelText,this.ariaLabelClearButtonText=t.ariaLabelClearButtonText,this.maxWidth=t.maxWidth,this.searchDelay=t.searchDelay,this.selectedValues=[],this.selectedOptions=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(t.search===void 0&&this.multiple||this.allowNewOption||this.showOptionsOnlyOnSearch)&&(this.hasSearch=!0),this.hasServerSearch=typeof this.onServerSearch=="function",(this.maxValues||this.hasServerSearch||this.showOptionsOnlyOnSearch)&&(this.disableSelectAll=!0,this.disableOptionGroupCheckbox=!0),this.keepAlwaysOpen&&(this.dropboxWrapper="self"),this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(t.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight(),this.uniqueId=this.getUniqueId()}},{key:"setDefaultProps",value:function(e){var t={dropboxWrapper:"self",valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",ariaLabelText:"Options list",ariaLabelClearButtonText:"Clear button",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",searchNormalize:!1,searchPlaceholderText:"Search...",searchFormLabel:"Search",clearButtonText:"Clear",moreText:"more...",optionsSelectedText:"options selected",optionSelectedText:"option selected",allOptionsSelectedText:"All",placeholder:"Select",position:"bottom left",zIndex:e.keepAlwaysOpen?1:2,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",updatePositionThrottle:100,name:"",additionalClasses:"",additionalDropboxClasses:"",additionalDropboxContainerClasses:"",additionalToggleButtonClasses:"",maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",popupPosition:"center",hideValueTooltipOnSelectAll:!0,emptyValue:"",searchDelay:300,focusSelectedOptionOnOpen:!0};return e.hasOptionDescription&&(t.optionsCount=4,t.optionHeight="50px"),Object.assign(t,e)}},{key:"setPropsFromElementAttr",value:function(e){var t=e.ele;Object.keys(ge).forEach(function(o){var s=t.getAttribute(o);De.indexOf(o)!==-1&&(s===""||s==="true")&&(s=!0),s&&(e[ge[o]]=s)})}},{key:"setEleProps",value:function(){var e=this.$ele;e.virtualSelect=this,e.value=this.multiple?[]:"",e.name=this.name,e.disabled=!1,e.required=this.required,e.autofocus=this.autofocus,e.multiple=this.multiple,e.form=e.closest("form"),e.reset=n.reset,e.setValue=n.setValueMethod,e.setOptions=n.setOptionsMethod,e.setDisabledOptions=n.setDisabledOptionsMethod,e.setEnabledOptions=n.setEnabledOptionsMethod,e.toggleSelectAll=n.toggleSelectAll,e.isAllSelected=n.isAllSelected,e.addOption=n.addOptionMethod,e.getNewValue=n.getNewValueMethod,e.getDisplayValue=n.getDisplayValueMethod,e.getSelectedOptions=n.getSelectedOptionsMethod,e.getDisabledOptions=n.getDisabledOptionsMethod,e.open=n.openMethod,e.close=n.closeMethod,e.focus=n.focusMethod,e.enable=n.enableMethod,e.disable=n.disableMethod,e.destroy=n.destroyMethod,e.validate=n.validateMethod,e.toggleRequired=n.toggleRequiredMethod,this.hasDropboxWrapper&&(this.$dropboxWrapper.virtualSelect=this)}},{key:"setValueMethod",value:function(e,t){var o={},s={},r=[],l=this.multiple,p=e;if(p){if(Array.isArray(p)||(p=[p]),l){var y=this.maxValues;y&&p.length>y&&p.splice(y)}else p.length>1&&(p=[p[0]]);p=p.map(function(w){return w||w===0?w.toString():""}),this.useGroupValue&&(p=this.setGroupOptionsValue(p)),p.forEach(function(w,C){o[w]=!0,s[w]=C}),this.allowNewOption&&p&&this.setNewOptionsFromValue(p)}if(this.options.forEach(function(w){o[w.value]===!0&&!w.isDisabled&&!w.isGroupTitle?(w.isSelected=!0,r.push(w.value)):w.isSelected=!1}),l)this.hasOptionGroup&&this.setGroupsSelectedProp(),r.sort(function(w,C){return s[w]-s[C]});else{var g=r,S=F(g,1);r=S[0]}this.beforeValueSet(),this.setValue(r,{disableEvent:t}),this.afterValueSet()}},{key:"setGroupOptionsValue",value:function(e){var t=[],o={},s={};return e.forEach(function(r){s[r]=!0}),this.options.forEach(function(r){var l=r.value,p=s[l]===!0;r.isGroupTitle?p&&(o[r.index]=!0):(p||o[r.groupIndex])&&t.push(l)}),t}},{key:"setGroupsSelectedProp",value:function(){var e=this.isAllGroupOptionsSelected.bind(this);this.options.forEach(function(t){t.isGroupTitle&&(t.isSelected=e(t.index))})}},{key:"setOptionsMethod",value:function(e,t){this.setOptions(e),this.afterSetOptions(t)}},{key:"setDisabledOptionsMethod",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.setDisabledOptions(e,!0),t||(this.setValueMethod(null),this.toggleAllOptionsClass()),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=[];if(!e)t&&this.options.forEach(function(r){return r.isDisabled=!1,r});else if(e===!0)t&&this.options.forEach(function(r){return r.isDisabled=!0,o.push(r.value),r});else{o=e.map(function(r){return r.toString()});var s={};o.forEach(function(r){s[r]=!0}),t&&this.options.forEach(function(r){return r.isDisabled=s[r.value]===!0,r})}this.disabledOptions=o}},{key:"setEnabledOptionsMethod",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.setEnabledOptions(e),t||(this.setValueMethod(null),this.toggleAllOptionsClass()),this.setVisibleOptions()}},{key:"setEnabledOptions",value:function(e){if(e!==void 0){var t=[];if(e===!0)this.options.forEach(function(s){return s.isDisabled=!1,s});else{var o={};e.forEach(function(s){o[s]=!0}),this.options.forEach(function(s){var r=o[s.value]!==!0;return s.isDisabled=r,r&&t.push(s.value),s})}this.disabledOptions=t}}},{key:"setOptions",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=[],s=this.disabledOptions.length,r=this.valueKey,l=this.labelKey,p=this.descriptionKey,y=this.aliasKey,g=this.hasOptionDescription,S=d.getString,w=d.convertToBoolean,C=this.secureText.bind(this),N=this.getAlias.bind(this),R=0,fe=!1,T={},re=!1;this.disabledOptions.forEach(function(K){T[K]=!0});var Y=function K(I){if(M(I)!=="object"){var te;I=(te={},P(te,r,I),P(te,l,I),te)}var ae=C(S(I[r])),de=C(S(I[l])),ke=I.options,Ce=!!ke,Z={index:R,value:ae,label:de,labelNormalized:e.searchNormalize?d.normalizeString(de).toLowerCase():de.toLowerCase(),alias:N(I[y]),isVisible:w(I.isVisible,!0),isNew:I.isNew||!1,isGroupTitle:Ce,classNames:I.classNames};if(!re&&ae===""&&(re=!0),s&&(Z.isDisabled=T[ae]===!0),I.isGroupOption&&(Z.isGroupOption=!0,Z.groupIndex=I.groupIndex),g&&(Z.description=C(S(I[p]))),I.customData&&(Z.customData=I.customData),o.push(Z),R+=1,Ce){var Ve=Z.index;fe=!0,ke.forEach(function(Ie){Ie.isGroupOption=!0,Ie.groupIndex=Ve,K(Ie)})}};Array.isArray(t)&&t.forEach(Y);var W=o.length,ee=this.$ele;ee.options=o,ee.length=W,this.options=o,this.visibleOptionsCount=W,this.lastOptionIndex=W-1,this.newValues=[],this.hasOptionGroup=fe,this.hasEmptyValueOption=re,this.setSortedOptions()}},{key:"setServerOptions",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.setOptionsMethod(t,!0);var o=this.selectedOptions,s=this.options,r=!1;if(o.length){var l={};r=!0,s.forEach(function(y){l[y.value]=!0}),o.forEach(function(y){l[y.value]!==!0&&(y.isVisible=!1,s.push(y))}),this.setOptionsMethod(s,!0)}if(this.allowNewOption&&this.searchValue){var p=s.some(function(y){return y.label.toLowerCase()===e.searchValue});p||(r=!0,this.setNewOption())}r?(this.setVisibleOptionsCount(),this.multiple&&this.toggleAllOptionsClass(),this.setValueText()):this.updatePosition(),this.setVisibleOptionsCount(),c.removeClass(this.$allWrappers,"server-searching")}},{key:"setSelectedOptions",value:function(){this.selectedOptions=this.options.filter(function(e){return e.isSelected})}},{key:"setSortedOptions",value:function(){var e=z(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(this.hasOptionGroup?e=this.sortOptionsGroup(e):e=this.sortOptions(e)),this.sortedOptions=e}},{key:"setVisibleOptions",value:function(){var e=z(this.sortedOptions),t=this.optionsCount*2,o=this.getVisibleStartIndex(),s=this.getNewOption(),r=o+t-1,l=0;s&&(s.visibleIndex=l,l+=1),e=e.filter(function(p){var y=!1;return p.isVisible&&!p.isCurrentNew&&(y=l>=o&&l<=r,p.visibleIndex=l,l+=1),y}),s&&(e=[s].concat(z(e))),this.visibleOptions=e,this.visibleOptionsCount=e.length,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){var t=parseInt((e||this.getVisibleStartIndex())*this.optionHeight);this.$options.style.transform="translate3d(0, ".concat(t,"px, 0)"),c.setData(this.$options,"top",t)}},{key:"setOptionsTooltip",value:function(){var e=this,t=this.getVisibleOptions(),o=this.hasOptionDescription;t.forEach(function(s){var r=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(s.index,'"]'));c.setData(r.querySelector(".vscomp-option-text"),"tooltip",s.label),o&&c.setData(r.querySelector(".vscomp-option-description"),"tooltip",s.description)})}},{key:"setValue",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.disableEvent,s=o===void 0?!1:o,r=t.disableValidation,l=r===void 0?!1:r,p=this.hasEmptyValueOption&&e===""||e;p?Array.isArray(e)?this.selectedValues=z(e):this.selectedValues=[e]:this.selectedValues=[];var y=this.getValue();this.$ele.value=y,this.$hiddenInput.value=this.getInputValue(y),this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.toggleAllOptionsClass(),this.setValueText(),c.toggleClass(this.$allWrappers,"has-value",d.isNotEmpty(this.selectedValues)),c.toggleClass(this.$allWrappers,"max-value-selected",this.isMaxValuesSelected),l||this.validate(),s||c.dispatchEvent(this.$ele,"change",!0)}},{key:"setValueText",value:function(){var e=this,t=this.multiple,o=this.selectedValues,s=this.noOfDisplayValues,r=this.showValueAsTags,l=this.$valueText,p=this.selectedLabelRenderer,y=[],g=[],S=o.length,w=0,C=this.isAllSelected&&!this.hasServerSearch&&!this.disableAllOptionsSelectedText&&!r;if(C&&this.hideValueTooltipOnSelectAll)l.innerHTML="".concat(this.allOptionsSelectedText," (").concat(S,")");else{var N=this.getSelectedOptions({fullDetails:!0,keepSelectionOrder:!0});N.some(function(K){if(K.isCurrentNew)return!1;if(w>=s)return!0;var I=K.label;if(typeof p=="function"&&(I=p(K)),y.push(I),w+=1,r){var te=d.willTextOverflow(l.parentElement,I)?e.getTooltipAttrText(I,!1,!0):"",ae='<span class="vscomp-value-tag" data-index="'.concat(K.index,'" ').concat(te,`>
                  <span class="vscomp-value-tag-content">`).concat(I,`</span>
                  <span class="vscomp-value-tag-clear-button">
                    <i class="vscomp-clear-icon"></i>
                  </span>
                </span>`);g.push(ae)}else g.push(I);return!1});var R=S-s;R>0&&g.push('<span class="vscomp-value-tag more-value-count">+ '.concat(R," ").concat(this.moreText,"</span>"));var fe=y.join(", ");if(fe==="")l.innerHTML=this.placeholder;else if(l.innerHTML=fe,t){var T=this.maxValues,re=this.alwaysShowSelectedOptionsCount||c.hasEllipsis(l);if(re||T||r){var Y='<span class="vscomp-selected-value-count">'.concat(S,"</span>");if(T&&(Y+=' / <span class="vscomp-max-value-count">'.concat(T,"</span>")),C)l.innerHTML="".concat(this.allOptionsSelectedText," (").concat(S,")");else if(r)l.innerHTML=g.join(""),this.$valueTags=l.querySelectorAll(".vscomp-value-tag"),this.setValueTagAttr();else if(!this.alwaysShowSelectedOptionsLabel){var W=S===1?this.optionSelectedText:this.optionsSelectedText;l.innerHTML="".concat(Y," ").concat(W)}}else g=[]}}var ee="";S===0?ee=this.placeholder:r||(ee=g.join(", ")),r||c.setData(l,"tooltip",ee),t&&(r?this.updatePosition():c.setData(l,"tooltipEllipsisOnly",S===0))}},{key:"setSearchValue",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(e===this.searchValueOriginal&&!o)){t||(this.$searchInput.value=e);var s=e.replace(/\\/g,"").toLowerCase().trim();this.searchValue=s,this.searchValueOriginal=e,c.toggleClass(this.$allWrappers,"has-search-value",e),this.afterSetSearchValue()}}},{key:"setVisibleOptionsCount",value:function(){var e=0,t=!1,o,s=this.searchGroup,r=this.showOptionsOnlyOnSearch,l=this.searchByStartsWith,p=this.searchValue;p=this.searchNormalize?d.normalizeString(p):p;var y=this.isOptionVisible.bind(this);this.hasOptionGroup&&(o=this.getVisibleOptionGroupsMapping(p)),this.options.forEach(function(g){if(!g.isCurrentNew){var S;r&&!p?(g.isVisible=!1,S={isVisible:!1,hasExactOption:!1}):S=y({data:g,searchValue:p,hasExactOption:t,visibleOptionGroupsMapping:o,searchGroup:s,searchByStartsWith:l}),S.isVisible&&(e+=1),t||(t=S.hasExactOption)}}),this.allowNewOption&&(p&&!t?(this.setNewOption(),e+=1):this.removeNewOption()),this.visibleOptionsCount=e,this.afterSetVisibleOptionsCount()}},{key:"setOptionProp",value:function(e,t,o){this.options[e]&&(this.options[e][t]=o)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height="".concat(this.optionHeight*this.visibleOptionsCount,"px")}},{key:"setOptionsContainerHeight",value:function(e){var t;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),this.halfOptionsCount=Math.ceil(this.optionsCount/2),t=this.getOptionsHeight(),this.optionsHeight=t):(t=this.optionsHeight,this.keepAlwaysOpen&&(c.setStyle(this.$noOptions,"height",t),c.setStyle(this.$noSearchResults,"height",t))),c.setStyle(this.$optionsContainer,"max-height",t),this.afterSetOptionsContainerHeight(e)}},{key:"setNewOption",value:function(e){var t=e||this.searchValueOriginal.trim();if(t){var o=this.getNewOption();if(o){var s=o.index;this.setOptionProp(s,"value",this.secureText(t)),this.setOptionProp(s,"label",this.secureText(t))}else{var r={value:t,label:t};e?(r.isNew=!0,this.newValues.push(t)):r.isCurrentNew=!0,this.addOption(r)}}}},{key:"setSelectedProp",value:function(){var e={};this.selectedValues.forEach(function(t){e[t]=!0}),this.options.forEach(function(t){e[t.value]===!0&&(t.isSelected=!0)})}},{key:"setNewOptionsFromValue",value:function(e){if(e){var t=this.setNewOption.bind(this),o={};this.options.forEach(function(s){o[s.value]=!0}),e.forEach(function(s){s&&o[s]!==!0&&t(s)})}}},{key:"setDropboxWrapperWidth",value:function(){if(!this.showAsPopup){var e=this.dropboxWidth||"".concat(this.$wrapper.offsetWidth,"px");c.setStyle(this.$dropboxContainer,"max-width",e)}}},{key:"setEleStyles",value:function(){var e=this.maxWidth,t={};e&&(t["max-width"]=e),c.setStyles(this.$ele,t)}},{key:"setDropboxStyles",value:function(){var e=this.dropboxWidth,t={},o={"z-index":this.zIndex};e&&(this.showAsPopup?t["max-width"]=e:o.width=e),c.setStyles(this.$dropboxContainer,o),c.setStyles(this.$dropbox,t)}},{key:"setOptionAttr",value:function(){var e=this.$visibleOptions,t=this.options,o="".concat(this.optionHeight,"px"),s=c.setStyle,r=c.getData,l=c.setData;e&&e.length&&e.forEach(function(p){var y=t[r(p,"index")];s(p,"height",o),l(p,"value",y.value)})}},{key:"setValueTagAttr",value:function(){var e=this.$valueTags;if(!(!e||!e.length)){var t=c.getData,o=c.setData,s=this.options;e.forEach(function(r){var l=t(r,"index");if(typeof l<"u"){var p=s[l];o(r,"value",p.value)}})}}},{key:"setScrollTop",value:function(){var e=this.selectedValues;if(!(this.showSelectedOptionsFirst||!this.focusSelectedOptionOnOpen||e.length===0)){var t={},o;e.forEach(function(s){t[s]=!0}),this.options.some(function(s){return t[s.value]?(o=s.visibleIndex,!0):!1}),o&&(this.$optionsContainer.scrollTop=this.optionHeight*o)}}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){var e;return this.multiple?this.useGroupValue?e=this.getGroupValue():e=this.selectedValues:e=this.selectedValues[0]||"",e}},{key:"getGroupValue",value:function(){var e=[],t={};return this.options.forEach(function(o){if(o.isSelected){var s=o.value;o.isGroupTitle?s&&(t[o.index]=!0,e.push(s)):t[o.groupIndex]!==!0&&e.push(s)}}),e}},{key:"getInputValue",value:function(e){var t=e;return t&&t.length?this.setValueAsArray&&this.multiple&&(t=JSON.stringify(t)):t=this.emptyValue,t}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var e=this.getFirstVisibleOptionIndex(),t=e-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=d.containsHTML(e)?d.replaceDoubleQuotesWithHTML(e):e,r={"data-tooltip":s||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":t,"data-tooltip-allow-html":o};return c.getAttributesText(r)}},{key:"getOptionObj",value:function(e){if(e){var t=d.getString,o=this.secureText.bind(this);return{index:e.index,value:o(t(e.value)),label:o(t(e.label)),description:o(t(e.description)),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isNew:e.isNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var e=this.options[this.lastOptionIndex];if(!(!e||!e.isCurrentNew))return e}},{key:"getOptionIndex",value:function(e){var t;return this.options.some(function(o){return o.value===e?(t=o.index,!0):!1}),t}},{key:"getNewValue",value:function(){var e={};this.newValues.forEach(function(o){e[o]=!0});var t=this.selectedValues.filter(function(o){return e[o]===!0});return this.multiple?t:t[0]}},{key:"getAlias",value:function(e){var t=e;return t&&(Array.isArray(t)?t=t.join(","):t=t.toString().trim(),t=t.toLowerCase()),t||""}},{key:"getDisplayValue",value:function(){var e=[];return this.options.forEach(function(t){t.isSelected&&e.push(t.label)}),this.multiple?e:e[0]||""}},{key:"getSelectedOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.fullDetails,o=t===void 0?!1:t,s=e.keepSelectionOrder,r=s===void 0?!1:s,l=this.valueKey,p=this.labelKey,y=this.selectedValues,g=[];if(this.options.forEach(function(w){if(w.isSelected&&!w.isGroupTitle)if(o)g.push(w);else{var C,N=(C={},P(C,l,w.value),P(C,p,w.label),C);w.isNew&&(N.isNew=!0),w.customData&&(N.customData=w.customData),g.push(N)}}),r){var S={};y.forEach(function(w,C){S[w]=C}),g.sort(function(w,C){return S[w.value]-S[C.value]})}return this.multiple||o?g:g[0]}},{key:"getDisabledOptions",value:function(){var e=this.valueKey,t=this.labelKey,o=this.disabledOptions,s={},r=[];return o.forEach(function(l){s[l]=!0}),this.options.forEach(function(l){var p=l.value,y=l.label;if(s[p]){var g;r.push((g={},P(g,e,p),P(g,t,y),g))}}),r}},{key:"getVisibleOptionGroupsMapping",value:function(e){var t=this.options,o={},s=this.isOptionVisible.bind(this);return t=this.structureOptionGroup(t),t.forEach(function(r){o[r.index]=r.options.some(function(l){return s({data:l,searchValue:e}).isVisible})}),o}},{key:"getOptionsCount",value:function(e){var t;if(this.showAsPopup){var o=window.innerHeight*80/100-ce;this.hasSearchContainer&&(o-=he),t=Math.floor(o/this.optionHeight)}else t=parseInt(e);return t}},{key:"getOptionsHeight",value:function(){return"".concat(this.optionsCount*this.optionHeight,"px")}},{key:"getSibling",value:function(e,t){var o=t==="next"?"nextElementSibling":"previousElementSibling",s=e;do s&&(s=s[o]);while(c.hasClass(s,"disabled")||c.hasClass(s,"group-title"));return s}},{key:"getUniqueId",value:function(){var e=d.getRandomInt(1e4),t=document.querySelector("#vscomp-ele-wrapper-".concat(e));return t?this.getUniqueId():e}},{key:"initDropboxPopover",value:function(){var e={ele:this.$ele,target:this.$dropboxContainer,position:this.position,zIndex:this.zIndex,margin:4,transitionDistance:30,hideArrowIcon:!0,disableManualAction:!0,disableUpdatePosition:!this.hasDropboxWrapper,updatePositionThrottle:this.updatePositionThrottle,afterShow:this.afterShowPopper.bind(this),afterHide:this.afterHidePopper.bind(this)};this.dropboxPopover=new PopoverComponent(e)}},{key:"openDropbox",value:function(e){this.isSilentOpen=e,e?c.setStyle(this.$dropboxContainer,"display","inline-flex"):(c.dispatchEvent(this.$ele,"beforeOpen"),c.setAria(this.$wrapper,"expanded",!0)),this.setDropboxWrapperWidth(),c.removeClass(this.$allWrappers,"closed"),c.changeTabIndex(this.$allWrappers,0),this.dropboxPopover&&!e?this.dropboxPopover.show():this.afterShowPopper()}},{key:"afterShowPopper",value:function(){var e=this.isSilentOpen;this.isSilentOpen=!1,e||(this.moveSelectedOptionsFirst(),this.setScrollTop(),c.addClass(this.$allWrappers,"focused"),this.showAsPopup?(c.addClass(this.$body,"vscomp-popup-active"),this.isPopupActive=!0):this.focusElementOnOpen(),c.dispatchEvent(this.$ele,"afterOpen"))}},{key:"closeDropbox",value:function(e){if(this.isSilentClose=e,this.keepAlwaysOpen){this.removeOptionFocus();return}e?c.setStyle(this.$dropboxContainer,"display",""):(c.dispatchEvent(this.$ele,"beforeClose"),c.setAria(this.$wrapper,"expanded",!1),c.setAria(this.$wrapper,"activedescendant","")),this.$wrapper.focus(),this.dropboxPopover&&!e?this.dropboxPopover.hide():this.afterHidePopper()}},{key:"afterHidePopper",value:function(){var e=this.isSilentClose;this.isSilentClose=!1,c.removeClass(this.$allWrappers,"focused"),this.removeOptionFocus(),!e&&this.isPopupActive&&(c.removeClass(this.$body,"vscomp-popup-active"),this.isPopupActive=!1),c.addClass(this.$allWrappers,"closed"),e||(c.dispatchEvent(this.$ele,"afterClose"),(this.initialSelectedValue&&this.initialSelectedValue.length===0||this.selectedValues.length>0)&&this.focus())}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),!this.$optionsContainer.scrollTop||!this.selectedValues.length?this.setVisibleOptions():this.scrollToTop())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"updatePosition",value:function(){!this.dropboxPopover||!this.isOpened()||this.$ele.updatePosition()}},{key:"isOpened",value:function(){return!c.hasClass(this.$wrapper,"closed")}},{key:"focusSearchInput",value:function(){var e=this.$searchInput;e&&e.focus()}},{key:"focusElementOnOpen",value:function(){var e=this.$searchInput,t=!this.options.length&&!this.hasServerSearch;if(e)t&&!this.allowNewOption?(c.setAttr(e,"disabled",""),this.$noOptions.focus()):(e.removeAttribute("disabled"),e.focus());else{var o=this.$dropbox.querySelector('[tabindex="0"]'),s=c.getData(o,"index");s!==void 0?this.focusOption({direction:"next"}):o?o.focus():this.focusFirstVisibleOption()}}},{key:"focusFirstVisibleOption",value:function(){var e=this.$optionsContainer.querySelector("[data-index='".concat(this.getFirstVisibleOptionIndex(),"']"));e?(c.hasClass(e,"group-title")&&(e=this.getSibling(e,"next")),c.setAttr(e,"tabindex","0"),this.$optionsContainer.scrollTop=this.optionHeight*this.getFirstVisibleOptionIndex(),this.focusOption({focusFirst:!0}),e.focus()):(e=this.$dropbox.querySelector('[tabindex="0"]'),e&&e.focus())}},{key:"focusOption",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.direction,o=e.$option,s=e.focusFirst,r=this.$dropboxContainer.querySelector(".vscomp-option.focused"),l;if(o)l=o;else if(!r||s){var p=this.getFirstVisibleOptionIndex();l=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(p,'"]')),(c.hasClass(l,"disabled")||c.hasClass(l,"group-title"))&&(l=this.getSibling(l,"next"))}else l=this.getSibling(r,t);l&&l!==r&&(r&&this.toggleOptionFocusedState(r,!1),this.toggleOptionFocusedState(l,!0),this.toggleFocusedProp(c.getData(l,"index"),!0),this.moveFocusedOptionToView(l))}},{key:"moveFocusedOptionToView",value:function(e){var t=e||this.$dropboxContainer.querySelector(".vscomp-option.focused");if(t){var o,s=this.$optionsContainer.getBoundingClientRect(),r=t.getBoundingClientRect(),l=s.top,p=s.bottom,y=s.height,g=r.top,S=r.bottom,w=r.height,C=t.offsetTop,N=c.getData(this.$options,"top","number");l>g?o=C+N:p<S&&(o=C-y+w+N),o!==void 0&&(this.$optionsContainer.scrollTop=o)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(this.toggleOptionFocusedState(e,!1),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.event;if(e){var s=!c.hasClass(e,"selected");if(s){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple){this.closeDropbox();return}var r=this.selectedValues,l=c.getData(e,"value"),p=c.getData(e,"index","number"),y=c.hasClass(e,"current-new"),g=!1,S=this.lastSelectedOptionIndex;if(this.lastSelectedOptionIndex=null,this.toggleSelectedProp(p,s),s){if(this.multiple)r.push(l),this.toggleAllOptionsClass(),this.toggleGroupOptionsParent(e),o&&o.shiftKey&&(g=!0);else{r.length&&this.toggleSelectedProp(this.getOptionIndex(r[0]),!1),r=[l];var w=this.$dropboxContainer.querySelector(".vscomp-option.selected");w&&this.toggleOptionSelectedState(w,!1),this.closeDropbox(),y||this.setSearchValue("")}this.lastSelectedOptionIndex=p,this.toggleOptionSelectedState(e)}else this.multiple&&(this.toggleOptionSelectedState(e),d.removeItemFromArray(r,l),this.toggleAllOptionsClass(!1),this.toggleGroupOptionsParent(e,!1));y&&this.beforeSelectNewValue(),this.setValue(r),g&&this.selectRangeOptions(S,p)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"selectRangeOptions",value:function(e,t){var o=this;if(!(typeof e!="number"||this.maxValues)){var s=this.selectedValues,r=this.hasOptionGroup,l={},p,y;if(e<t?(p=e,y=t):(p=t,y=e),this.options.forEach(function(S){if(!(S.isDisabled||S.isGroupTitle||!S.isVisible||S.isSelected)){var w=S.index;if(w>p&&w<y){if(r){var C=S.groupIndex;typeof C=="number"&&(l[C]=!0)}S.isSelected=!0,s.push(S.value)}}}),this.toggleAllOptionsClass(),this.setValue(s),l=Object.keys(l),l.length){var g=this.toggleGroupTitleProp.bind(this);l.forEach(function(S){g(parseInt(S))})}setTimeout(function(){o.renderOptions()},0)}}},{key:"toggleAllOptions",value:function(e){if(!(!this.multiple||this.disableSelectAll)){var t=typeof isSelected=="boolean"?e:!c.hasClass(this.$toggleAllCheckbox,"checked"),o=[],s=this.selectAllOnlyVisible;this.options.forEach(function(r){var l=r;if(!(l.isDisabled||l.isCurrentNew)){var p=l.isVisible,y=l.isSelected;!t&&(!s||p||!y)||t&&s&&!p&&!y?l.isSelected=!1:(l.isSelected=!0,l.isGroupTitle||o.push(l.value))}}),this.toggleAllOptionsClass(t),this.setValue(o),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){if(this.multiple){var t=typeof e=="boolean",o=!1;t||(e=this.isAllOptionsSelected()),!e&&this.selectAllOnlyVisible&&this.searchValue!==""&&(this.visibleOptionsCount>0||this.searchValue==="")&&(o=this.isAllOptionsSelected(!0)),c.toggleClass(this.$toggleAllCheckbox,"checked",e||o),this.isAllSelected=e}}},{key:"isAllOptionsSelected",value:function(e){var t=!1;return this.options.length&&this.selectedValues.length&&(t=!this.options.some(function(o){return!o.isSelected&&!o.isDisabled&&!o.isGroupTitle&&(!e||o.isVisible)})),t}},{key:"isAllGroupOptionsSelected",value:function(e){var t=!1;return this.options.length&&(t=!this.options.some(function(o){return!o.isSelected&&!o.isDisabled&&!o.isGroupTitle&&o.groupIndex===e})),t}},{key:"toggleGroupOptionsParent",value:function(e,t){if(!(!this.hasOptionGroup||this.disableOptionGroupCheckbox||!e)){var o=c.getData(e,"groupIndex");o!==void 0&&(o=parseInt(o));var s=this.$options.querySelector('.vscomp-option[data-index="'.concat(o,'"]')),r=typeof t=="boolean"?t:this.isAllGroupOptionsSelected(o);this.toggleGroupTitleCheckbox(s,r),this.toggleGroupTitleProp(o,r)}}},{key:"toggleGroupTitleProp",value:function(e,t){var o=typeof t=="boolean"?t:this.isAllGroupOptionsSelected(e);this.toggleSelectedProp(e,o)}},{key:"toggleGroupOptions",value:function(e,t){var o=this;if(!(!this.hasOptionGroup||this.disableOptionGroupCheckbox||!e)){var s=c.getData(e,"index","number"),r=this.selectedValues,l=this.selectAllOnlyVisible,p={},y=d.removeItemFromArray;r.forEach(function(g){p[g]=!0}),this.options.forEach(function(g){if(!(g.isDisabled||g.groupIndex!==s)){var S=g.value;!t||l&&!g.isVisible?(g.isSelected=!1,p[S]&&y(r,S)):(g.isSelected=!0,p[S]||r.push(S))}}),this.toggleAllOptionsClass(t?null:!1),this.setValue(r),setTimeout(function(){o.renderOptions()},0)}}},{key:"toggleGroupTitleCheckbox",value:function(e,t){if(e){var o=c.getData(e,"index","number");this.toggleSelectedProp(o,t),this.toggleOptionSelectedState(e,t)}}},{key:"toggleFocusedProp",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(e,"isFocused",t),this.focusedOptionIndex=e}},{key:"toggleSelectedProp",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.setOptionProp(e,"isSelected",t)}},{key:"scrollToTop",value:function(){var e=!this.isOpened();e&&this.openDropbox(!0);var t=this.$optionsContainer.scrollTop;t>0&&(this.$optionsContainer.scrollTop=0),e&&this.closeDropbox(!0)}},{key:"reset",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.options.forEach(function(o){o.isSelected=!1}),this.beforeValueSet(!0),this.setValue(null,{disableEvent:t,disableValidation:e}),this.afterValueSet(),e&&c.removeClass(this.$allWrappers,"has-error"),c.dispatchEvent(this.$ele,"reset")}},{key:"addOption",value:function(e,t){if(e){this.lastOptionIndex+=1;var o=this.getOptionObj(ye(ye({},e),{},{index:this.lastOptionIndex}));this.options.push(o),this.sortedOptions.push(o),t&&(this.visibleOptionsCount+=1,this.afterSetOptions())}}},{key:"removeOption",value:function(e){!e&&e!==0||(this.options.splice(e,1),this.lastOptionIndex-=1)}},{key:"removeNewOption",value:function(){var e=this.getNewOption();e&&this.removeOption(e.index)}},{key:"sortOptions",value:function(e){return e.sort(function(t,o){var s=t.isSelected||t.isAnySelected,r=o.isSelected||o.isAnySelected;return!s&&!r?0:s&&(!r||t.index<o.index)?-1:1})}},{key:"sortOptionsGroup",value:function(e){var t=this.sortOptions.bind(this),o=this.structureOptionGroup(e);return o.forEach(function(s){var r=s.options;s.isAnySelected=r.some(function(l){return l.isSelected}),s.isAnySelected&&t(r)}),t(o),this.destructureOptionGroup(o)}},{key:"isOptionVisible",value:function(e){var t=e.data,o=e.searchValue,s=e.hasExactOption,r=e.visibleOptionGroupsMapping,l=e.searchGroup,p=e.searchByStartsWith,y=t.value.toLowerCase(),g=this.searchNormalize?t.labelNormalized:t.label.toLowerCase(),S=t.description,w=t.alias,C=p?g.startsWith(o):g.includes(o);return t.isGroupTitle&&(!l||!C)&&(C=r[t.index]),!p&&w&&!C&&(C=w.includes(o)),!p&&S&&!C&&(C=S.toLowerCase().includes(o)),t.isVisible=C,s||(s=g===o||y===o),{isVisible:C,hasExactOption:s}}},{key:"structureOptionGroup",value:function(e){var t=[],o={};return e.forEach(function(s){if(s.isGroupTitle){var r=[];s.options=r,o[s.index]=r,t.push(s)}}),e.forEach(function(s){s.isGroupOption&&o[s.groupIndex].push(s)}),t}},{key:"destructureOptionGroup",value:function(e){var t=[];return e.forEach(function(o){t.push(o),t=t.concat(o.options)}),t}},{key:"serverSearch",value:function(){c.removeClass(this.$allWrappers,"has-no-search-results"),c.addClass(this.$allWrappers,"server-searching"),this.setSelectedOptions(),this.onServerSearch(this.searchValue,this)}},{key:"removeValue",value:function(e){var t=this.selectedValues,o=c.getData(e,"value");d.removeItemFromArray(t,o),this.setValueMethod(t)}},{key:"focus",value:function(){this.$wrapper.focus()}},{key:"enable",value:function(){this.$ele.disabled=!1,this.$ele.removeAttribute("disabled"),this.$hiddenInput.removeAttribute("disabled"),c.setAria(this.$wrapper,"disabled",!1),c.changeTabIndex(this.$wrapper,0)}},{key:"disable",value:function(){this.$ele.disabled=!0,this.$ele.setAttribute("disabled",""),this.$hiddenInput.setAttribute("disabled",""),c.setAria(this.$wrapper,"disabled",!0),c.changeTabIndex(this.$wrapper,-1),this.$wrapper.blur()}},{key:"validate",value:function(){if(this.disableValidation)return!0;var e=!1,t=this.selectedValues,o=this.minValues;return this.required&&(d.isEmpty(t)||this.multiple&&o&&t.length<o)&&(e=!0),c.toggleClass(this.$allWrappers,"has-error",e),!e}},{key:"destroy",value:function(){var e=this.$ele;e.virtualSelect=void 0,e.value=void 0,e.innerHTML="",this.hasDropboxWrapper&&(this.$dropboxWrapper.remove(),this.removeEvents()),this.dropboxPopover&&this.dropboxPopover.destroy(),c.removeClass(e,"vscomp-ele")}},{key:"createSecureTextElements",value:function(){this.$secureDiv=document.createElement("div"),this.$secureText=document.createTextNode(""),this.$secureDiv.appendChild(this.$secureText)}},{key:"secureText",value:function(e){return!e||!this.enableSecureText?e:(this.$secureText.nodeValue=e,this.$secureDiv.innerHTML)}},{key:"toggleRequired",value:function(e){this.required=d.convertToBoolean(e),this.$ele.required=this.required}},{key:"toggleOptionSelectedState",value:function(e,t){var o=t;typeof o>"u"&&(o=!c.hasClass(e,"selected")),c.toggleClass(e,"selected",o),c.setAria(e,"selected",o)}},{key:"toggleOptionFocusedState",value:function(e,t){e&&(c.toggleClass(e,"focused",t),c.setAttr(e,"tabindex",t?"0":"-1"),document.activeElement!==this.$searchInput&&e.focus(),t&&c.setAria(this.$wrapper,"activedescendant",e.id))}}],[{key:"init",value:function(e){var t=e.ele;if(t){var o=!1;if(typeof t=="string"){t=document.querySelectorAll(t);var s=t.length;if(s===0)return;s===1&&(o=!0)}(t.length===void 0||t.forEach===void 0)&&(t=[t],o=!0);var r=[];return t.forEach(function(l){if(l.virtualSelect){r.push(l.virtualSelect);return}e.ele=l,l.tagName==="SELECT"&&n.setPropsFromSelect(e),r.push(new n(e))}),o?r[0]:r}}},{key:"getAttrProps",value:function(){var e=c.convertPropToDataAttr,t={};return Q.forEach(function(o){t[o]=o}),Me.forEach(function(o){t[e(o)]=o}),t}},{key:"setPropsFromSelect",value:function(e){var t=e.ele,o=[],s=[],r=function y(g){var S=[],w=Array.from(g.children);return w.forEach(function(C){var N=C.value,R={value:N};C.tagName==="OPTGROUP"?(R.label=C.getAttribute("label"),R.options=y(C)):R.label=C.innerHTML,S.push(R),C.disabled&&o.push(N),C.selected&&s.push(N)}),S},l=r(t),p=document.createElement("div");c.setAttrFromEle(t,p,Object.keys(ge),De),t.parentNode.insertBefore(p,t),t.remove(),e.ele=p,e.options=l,e.disabledOptions=o,e.selectedValue=s}},{key:"onFormReset",value:function(e){var t=e.target.closest("form");t&&t.querySelectorAll(".vscomp-ele-wrapper").forEach(function(o){o.parentElement.virtualSelect.reset(!0)})}},{key:"onFormSubmit",value:function(e){n.validate(e.target.closest("form"))||e.preventDefault()}},{key:"validate",value:function(e){if(!e)return!0;var t=!1;return e.querySelectorAll(".vscomp-ele-wrapper").forEach(function(o){var s=o.parentElement.virtualSelect.validate();!t&&!s&&(t=!0)}),!t}},{key:"reset",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.virtualSelect.reset(e,t)}},{key:"setValueMethod",value:function(){var e;(e=this.virtualSelect).setValueMethod.apply(e,arguments)}},{key:"setOptionsMethod",value:function(){var e;(e=this.virtualSelect).setOptionsMethod.apply(e,arguments)}},{key:"setDisabledOptionsMethod",value:function(){var e;(e=this.virtualSelect).setDisabledOptionsMethod.apply(e,arguments)}},{key:"setEnabledOptionsMethod",value:function(){var e;(e=this.virtualSelect).setEnabledOptionsMethod.apply(e,arguments)}},{key:"toggleSelectAll",value:function(e){this.virtualSelect.toggleAllOptions(e)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(e){this.virtualSelect.addOption(e,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"getSelectedOptionsMethod",value:function(e){return this.virtualSelect.getSelectedOptions(e)}},{key:"getDisabledOptionsMethod",value:function(){return this.virtualSelect.getDisabledOptions()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"focusMethod",value:function(){return this.virtualSelect.focus()}},{key:"enableMethod",value:function(){return this.virtualSelect.enable()}},{key:"disableMethod",value:function(){return this.virtualSelect.disable()}},{key:"destroyMethod",value:function(){return this.virtualSelect.destroy()}},{key:"validateMethod",value:function(){return this.virtualSelect.validate()}},{key:"toggleRequiredMethod",value:function(e){return this.virtualSelect.toggleRequired(e)}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-ele-wrapper").forEach(function(e){e.parentElement.virtualSelect.onResize()})}}]),n}();document.addEventListener("reset",we.onFormReset),document.addEventListener("submit",we.onFormSubmit),window.addEventListener("resize",we.onResizeMethod),ge=we.getAttrProps(),window.VirtualSelect=we,typeof NodeList<"u"&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)})(),function(){/*!
 * Popover v1.0.13
 * https://sa-si-dev.github.io/popover
 * Licensed under MIT (https://github.com/sa-si-dev/popover/blob/master/LICENSE)
 */(function(){function U($){return function(x){if(Array.isArray(x))return ie(x)}($)||function(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}($)||function(x,D){if(x){if(typeof x=="string")return ie(x,D);var u=Object.prototype.toString.call(x).slice(8,-1);return u==="Object"&&x.constructor&&(u=x.constructor.name),u==="Map"||u==="Set"?Array.from(x):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?ie(x,D):void 0}}($)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ie($,x){(x==null||x>$.length)&&(x=$.length);for(var D=0,u=new Array(x);D<x;D++)u[D]=$[D];return u}function Oe($,x){for(var D=0;D<x.length;D++){var u=x[D];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty($,u.key,u)}}var E=function(){function $(){(function(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")})(this,$)}var x,D;return x=$,D=[{key:"addClass",value:function(u,d){u&&(d=d.split(" "),$.getElements(u).forEach(function(k){var V;(V=k.classList).add.apply(V,U(d))}))}},{key:"removeClass",value:function(u,d){u&&(d=d.split(" "),$.getElements(u).forEach(function(k){var V;(V=k.classList).remove.apply(V,U(d))}))}},{key:"getElements",value:function(u){if(u)return u.forEach===void 0&&(u=[u]),u}},{key:"getMoreVisibleSides",value:function(u){if(!u)return{};var d=u.getBoundingClientRect(),k=window.innerWidth,V=window.innerHeight,_=d.left,L=d.top;return{horizontal:_>k-_-d.width?"left":"right",vertical:L>V-L-d.height?"top":"bottom"}}},{key:"getAbsoluteCoords",value:function(u){if(u){var d=u.getBoundingClientRect(),k=window.pageXOffset,V=window.pageYOffset;return{width:d.width,height:d.height,top:d.top+V,right:d.right+k,bottom:d.bottom+V,left:d.left+k}}}},{key:"getCoords",value:function(u){return u?u.getBoundingClientRect():{}}},{key:"getData",value:function(u,d,k){if(u){var V=u?u.dataset[d]:"";return k==="number"?V=parseFloat(V)||0:V==="true"?V=!0:V==="false"&&(V=!1),V}}},{key:"setData",value:function(u,d,k){u&&(u.dataset[d]=k)}},{key:"setStyle",value:function(u,d,k){u&&(u.style[d]=k)}},{key:"show",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";$.setStyle(u,"display",d)}},{key:"hide",value:function(u){$.setStyle(u,"display","none")}},{key:"getHideableParent",value:function(u){for(var d,k=u.parentElement;k;){var V=getComputedStyle(k).overflow;if(V.indexOf("scroll")!==-1||V.indexOf("auto")!==-1){d=k;break}k=k.parentElement}return d}}],D&&Oe(x,D),$}();function J($,x){for(var D=0;D<x.length;D++){var u=x[D];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty($,u.key,u)}}var oe=["top","bottom","left","right"].map(function($){return"position-".concat($)}),q={top:"rotate(180deg)",left:"rotate(90deg)",right:"rotate(-90deg)"},ve=function(){function $(u){(function(d,k){if(!(d instanceof k))throw new TypeError("Cannot call a class as a function")})(this,$);try{this.setProps(u),this.init()}catch(d){console.warn("Couldn't initiate popper"),console.error(d)}}var x,D;return x=$,D=[{key:"init",value:function(){var u=this.$popperEle;u&&this.$triggerEle&&(E.setStyle(u,"zIndex",this.zIndex),this.setPosition())}},{key:"setProps",value:function(u){var d=(u=this.setDefaultProps(u)).position?u.position.toLowerCase():"auto";if(this.$popperEle=u.$popperEle,this.$triggerEle=u.$triggerEle,this.$arrowEle=u.$arrowEle,this.margin=parseFloat(u.margin),this.offset=parseFloat(u.offset),this.enterDelay=parseFloat(u.enterDelay),this.exitDelay=parseFloat(u.exitDelay),this.showDuration=parseFloat(u.showDuration),this.hideDuration=parseFloat(u.hideDuration),this.transitionDistance=parseFloat(u.transitionDistance),this.zIndex=parseFloat(u.zIndex),this.afterShowCallback=u.afterShow,this.afterHideCallback=u.afterHide,this.hasArrow=!!this.$arrowEle,d.indexOf(" ")!==-1){var k=d.split(" ");this.position=k[0],this.secondaryPosition=k[1]}else this.position=d}},{key:"setDefaultProps",value:function(u){return Object.assign({position:"auto",margin:8,offset:5,enterDelay:0,exitDelay:0,showDuration:300,hideDuration:200,transitionDistance:10,zIndex:1},u)}},{key:"setPosition",value:function(){E.show(this.$popperEle,"inline-flex");var u,d,k,V=window.innerWidth,_=window.innerHeight,L=E.getAbsoluteCoords(this.$popperEle),b=E.getAbsoluteCoords(this.$triggerEle),h=L.width,m=L.height,v=L.top,a=L.right,f=L.bottom,O=L.left,A=b.width,G=b.height,H=b.top,X=b.right,j=b.bottom,c=b.left,B=H-v,ye=c-O,P=ye,M=B,F=this.position,le=this.secondaryPosition,Ee=A/2-h/2,Ae=G/2-m/2,z=this.margin,me=this.transitionDistance,se=window.scrollY-v,be=_+se,ue=window.scrollX-O,ne=V+ue,pe=this.offset;pe&&(se+=pe,be-=pe,ue+=pe,ne-=pe),F==="auto"&&(F=E.getMoreVisibleSides(this.$triggerEle).vertical);var Se={top:{top:M-m-z,left:P+Ee},bottom:{top:M+G+z,left:P+Ee},right:{top:M+Ae,left:P+A+z},left:{top:M+Ae,left:P-h-z}},Te=Se[F];if(M=Te.top,P=Te.left,le&&(le==="top"?M=B:le==="bottom"?M=B+G-m:le==="left"?P=ye:le==="right"&&(P=ye+A-h)),P<ue?F==="left"?k="right":P=ue+O>X?X-O:ue:P+h>ne&&(F==="right"?k="left":P=ne+O<c?c-a:ne-h),M<se?F==="top"?k="bottom":M=se+v>j?j-v:se:M+m>be&&(F==="bottom"?k="top":M=be+v<H?H-f:be-m),k){var xe=Se[k];(F=k)==="top"||F==="bottom"?M=xe.top:F!=="left"&&F!=="right"||(P=xe.left)}F==="top"?(u=M+me,d=P):F==="right"?(u=M,d=P-me):F==="left"?(u=M,d=P+me):(u=M-me,d=P);var $e="translate3d(".concat(parseInt(d),"px, ").concat(parseInt(u),"px, 0)");if(E.setStyle(this.$popperEle,"transform",$e),E.setData(this.$popperEle,"fromLeft",d),E.setData(this.$popperEle,"fromTop",u),E.setData(this.$popperEle,"top",M),E.setData(this.$popperEle,"left",P),E.removeClass(this.$popperEle,oe.join(" ")),E.addClass(this.$popperEle,"position-".concat(F)),this.hasArrow){var ce=0,he=0,Pe=P+O,De=M+v,Q=this.$arrowEle.offsetWidth/2,ge=q[F]||"";F==="top"||F==="bottom"?(ce=A/2+c-Pe)<Q?ce=Q:ce>h-Q&&(ce=h-Q):F!=="left"&&F!=="right"||((he=G/2+H-De)<Q?he=Q:he>m-Q&&(he=m-Q)),E.setStyle(this.$arrowEle,"transform","translate3d(".concat(parseInt(ce),"px, ").concat(parseInt(he),"px, 0) ").concat(ge))}E.hide(this.$popperEle)}},{key:"resetPosition",value:function(){E.setStyle(this.$popperEle,"transform","none"),this.setPosition()}},{key:"show",value:function(){var u=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=d.resetPosition,V=d.data;clearTimeout(this.exitDelayTimeout),clearTimeout(this.hideDurationTimeout),k&&this.resetPosition(),this.enterDelayTimeout=setTimeout(function(){var _=E.getData(u.$popperEle,"left"),L=E.getData(u.$popperEle,"top"),b="translate3d(".concat(parseInt(_),"px, ").concat(parseInt(L),"px, 0)"),h=u.showDuration;E.show(u.$popperEle,"inline-flex"),E.getCoords(u.$popperEle),E.setStyle(u.$popperEle,"transitionDuration",h+"ms"),E.setStyle(u.$popperEle,"transform",b),E.setStyle(u.$popperEle,"opacity",1),u.showDurationTimeout=setTimeout(function(){typeof u.afterShowCallback=="function"&&u.afterShowCallback(V)},h)},this.enterDelay)}},{key:"hide",value:function(){var u=this,d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).data;clearTimeout(this.enterDelayTimeout),clearTimeout(this.showDurationTimeout),this.exitDelayTimeout=setTimeout(function(){if(u.$popperEle){var k=parseInt(E.getData(u.$popperEle,"fromLeft")),V=parseInt(E.getData(u.$popperEle,"fromTop")),_="translate3d(".concat(k,"px, ").concat(V,"px, 0)"),L=u.hideDuration;E.setStyle(u.$popperEle,"transitionDuration",L+"ms"),E.setStyle(u.$popperEle,"transform",_),E.setStyle(u.$popperEle,"opacity",0),u.hideDurationTimeout=setTimeout(function(){E.hide(u.$popperEle),typeof u.afterHideCallback=="function"&&u.afterHideCallback(d)},L)}},this.exitDelay)}},{key:"updatePosition",value:function(){E.setStyle(this.$popperEle,"transitionDuration","0ms"),this.resetPosition();var u=parseInt(E.getData(this.$popperEle,"left")),d=parseInt(E.getData(this.$popperEle,"top"));E.show(this.$popperEle,"inline-flex"),E.setStyle(this.$popperEle,"transform","translate3d(".concat(u,"px, ").concat(d,"px, 0)"))}}],D&&J(x.prototype,D),$}();window.PopperComponent=ve})(),function(){function U(b){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},U(b)}function ie(b,h){for(var m=0;m<h.length;m++){var v=h[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,Oe(v.key),v)}}function Oe(b){var h=function(m,v){if(U(m)!="object"||!m)return m;var a=m[Symbol.toPrimitive];if(a!==void 0){var f=a.call(m,v);if(U(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}(b,"string");return U(h)=="symbol"?h:h+""}var E=function(){return b=function v(){(function(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")})(this,v)},m=[{key:"convertToBoolean",value:function(v){return v=v===!0||v==="true"||v!==!1&&v!=="false"&&arguments.length>1&&arguments[1]!==void 0&&arguments[1]}},{key:"removeArrayEmpty",value:function(v){return Array.isArray(v)&&v.length?v.filter(function(a){return!!a}):[]}},{key:"throttle",value:function(v,a){var f,O=0;return function(){for(var A=arguments.length,G=new Array(A),H=0;H<A;H++)G[H]=arguments[H];var X=new Date().getTime(),j=a-(X-O);clearTimeout(f),j<=0?(O=X,v.apply(void 0,G)):f=setTimeout(function(){v.apply(void 0,G)},j)}}}],(h=null)&&ie(b.prototype,h),m&&ie(b,m),Object.defineProperty(b,"prototype",{writable:!1}),b;var b,h,m}();function J(b){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},J(b)}function oe(b){return function(h){if(Array.isArray(h))return q(h)}(b)||function(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}(b)||function(h,m){if(h){if(typeof h=="string")return q(h,m);var v=Object.prototype.toString.call(h).slice(8,-1);return v==="Object"&&h.constructor&&(v=h.constructor.name),v==="Map"||v==="Set"?Array.from(h):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?q(h,m):void 0}}(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q(b,h){(h==null||h>b.length)&&(h=b.length);for(var m=0,v=new Array(h);m<h;m++)v[m]=b[m];return v}function ve(b,h){for(var m=0;m<h.length;m++){var v=h[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,$(v.key),v)}}function $(b){var h=function(m,v){if(J(m)!="object"||!m)return m;var a=m[Symbol.toPrimitive];if(a!==void 0){var f=a.call(m,v);if(J(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}(b,"string");return J(h)=="symbol"?h:h+""}var x=function(){function b(){(function(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")})(this,b)}return h=b,v=[{key:"addClass",value:function(a,f){a&&(f=f.split(" "),b.getElements(a).forEach(function(O){var A;(A=O.classList).add.apply(A,oe(f))}))}},{key:"removeClass",value:function(a,f){a&&(f=f.split(" "),b.getElements(a).forEach(function(O){var A;(A=O.classList).remove.apply(A,oe(f))}))}},{key:"hasClass",value:function(a,f){return!!a&&a.classList.contains(f)}},{key:"getElement",value:function(a){return a&&(typeof a=="string"?a=document.querySelector(a):a.length!==void 0&&(a=a[0])),a||null}},{key:"getElements",value:function(a){if(a)return a.forEach===void 0&&(a=[a]),a}},{key:"addEvent",value:function(a,f,O){b.addOrRemoveEvent(a,f,O,"add")}},{key:"removeEvent",value:function(a,f,O){b.addOrRemoveEvent(a,f,O,"remove")}},{key:"addOrRemoveEvent",value:function(a,f,O,A){a&&(f=E.removeArrayEmpty(f.split(" "))).forEach(function(G){(a=b.getElements(a)).forEach(function(H){A==="add"?H.addEventListener(G,O):H.removeEventListener(G,O)})})}},{key:"getScrollableParents",value:function(a){if(!a)return[];for(var f=[window],O=a.parentElement;O;){var A=getComputedStyle(O).overflow;A.indexOf("scroll")===-1&&A.indexOf("auto")===-1||f.push(O),O=O.parentElement}return f}},{key:"convertPropToDataAttr",value:function(a){return a?"data-popover-".concat(a).replace(/([A-Z])/g,"-$1").toLowerCase():""}}],(m=null)&&ve(h.prototype,m),v&&ve(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h;var h,m,v}();function D(b){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},D(b)}function u(b,h){for(var m=0;m<h.length;m++){var v=h[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,d(v.key),v)}}function d(b){var h=function(m,v){if(D(m)!="object"||!m)return m;var a=m[Symbol.toPrimitive];if(a!==void 0){var f=a.call(m,v);if(D(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}(b,"string");return D(h)=="symbol"?h:h+""}var k,V={27:"onEscPress"},_=["target","position","margin","offset","enterDelay","exitDelay","showDuration","hideDuration","transitionDistance","updatePositionThrottle","zIndex","hideOnOuterClick","showOnHover","hideArrowIcon","disableManualAction","disableUpdatePosition"],L=function(){function b(a){(function(f,O){if(!(f instanceof O))throw new TypeError("Cannot call a class as a function")})(this,b);try{this.setProps(a),this.init()}catch(f){console.warn("Couldn't initiate Popover component"),console.error(f)}}return h=b,v=[{key:"init",value:function(a){var f=a.ele;if(f){var O=!1;if(typeof f=="string"){if(!(f=document.querySelectorAll(f)))return;f.length===1&&(O=!0)}f.length===void 0&&(f=[f],O=!0);var A=[];return f.forEach(function(G){a.ele=G,b.destroy(G),A.push(new b(a))}),O?A[0]:A}}},{key:"destroy",value:function(a){if(a){var f=a.popComp;f&&f.destroy()}}},{key:"showMethod",value:function(){this.popComp.show()}},{key:"hideMethod",value:function(){this.popComp.hide()}},{key:"updatePositionMethod",value:function(){this.popComp.popper.updatePosition()}},{key:"getAttrProps",value:function(){var a=x.convertPropToDataAttr,f={};return _.forEach(function(O){f[a(O)]=O}),f}}],(m=[{key:"init",value:function(){this.$popover&&(this.setElementProps(),this.renderArrow(),this.initPopper(),this.addEvents())}},{key:"getEvents",value:function(){var a=[{$ele:document,event:"click",method:"onDocumentClick"},{$ele:document,event:"keydown",method:"onDocumentKeyDown"}];return this.disableManualAction||(a.push({$ele:this.$ele,event:"click",method:"onTriggerEleClick"}),this.showOnHover&&(a.push({$ele:this.$ele,event:"mouseenter",method:"onTriggerEleMouseEnter"}),a.push({$ele:this.$ele,event:"mouseleave",method:"onTriggerEleMouseLeave"}))),a}},{key:"addOrRemoveEvents",value:function(a){var f=this;this.getEvents().forEach(function(O){f.addOrRemoveEvent({action:a,$ele:O.$ele,events:O.event,method:O.method})})}},{key:"addEvents",value:function(){this.addOrRemoveEvents("add")}},{key:"removeEvents",value:function(){this.addOrRemoveEvents("remove"),this.removeScrollEventListeners(),this.removeResizeEventListeners()}},{key:"addOrRemoveEvent",value:function(a){var f=this,O=a.action,A=a.$ele,G=a.events,H=a.method,X=a.throttle;A&&(G=E.removeArrayEmpty(G.split(" "))).forEach(function(j){var c="".concat(H,"-").concat(j),B=f.events[c];B||(B=f[H].bind(f),X&&(B=E.throttle(B,X)),f.events[c]=B),O==="add"?x.addEvent(A,j,B):x.removeEvent(A,j,B)})}},{key:"addScrollEventListeners",value:function(){this.$scrollableElems=x.getScrollableParents(this.$ele),this.addOrRemoveEvent({action:"add",$ele:this.$scrollableElems,events:"scroll",method:"onAnyParentScroll",throttle:this.updatePositionThrottle})}},{key:"removeScrollEventListeners",value:function(){this.$scrollableElems&&(this.addOrRemoveEvent({action:"remove",$ele:this.$scrollableElems,events:"scroll",method:"onAnyParentScroll"}),this.$scrollableElems=null)}},{key:"addResizeEventListeners",value:function(){this.addOrRemoveEvent({action:"add",$ele:window,events:"resize",method:"onResize",throttle:this.updatePositionThrottle})}},{key:"removeResizeEventListeners",value:function(){this.addOrRemoveEvent({action:"remove",$ele:window,events:"resize",method:"onResize"})}},{key:"onAnyParentScroll",value:function(){this.popper.updatePosition()}},{key:"onResize",value:function(){this.popper.updatePosition()}},{key:"onDocumentClick",value:function(a){var f=a.target,O=f.closest(".pop-comp-ele"),A=f.closest(".pop-comp-wrapper");this.hideOnOuterClick&&O!==this.$ele&&A!==this.$popover&&this.hide()}},{key:"onDocumentKeyDown",value:function(a){var f=a.which||a.keyCode,O=V[f];O&&this[O](a)}},{key:"onEscPress",value:function(){this.hideOnOuterClick&&this.hide()}},{key:"onTriggerEleClick",value:function(){this.toggle()}},{key:"onTriggerEleMouseEnter",value:function(){this.show()}},{key:"onTriggerEleMouseLeave",value:function(){this.hide()}},{key:"setProps",value:function(a){a=this.setDefaultProps(a),this.setPropsFromElementAttr(a);var f=E.convertToBoolean;this.$ele=a.ele,this.target=a.target,this.position=a.position,this.margin=parseFloat(a.margin),this.offset=parseFloat(a.offset),this.enterDelay=parseFloat(a.enterDelay),this.exitDelay=parseFloat(a.exitDelay),this.showDuration=parseFloat(a.showDuration),this.hideDuration=parseFloat(a.hideDuration),this.transitionDistance=parseFloat(a.transitionDistance),this.updatePositionThrottle=parseFloat(a.updatePositionThrottle),this.zIndex=parseFloat(a.zIndex),this.hideOnOuterClick=f(a.hideOnOuterClick),this.showOnHover=f(a.showOnHover),this.hideArrowIcon=f(a.hideArrowIcon),this.disableManualAction=f(a.disableManualAction),this.disableUpdatePosition=f(a.disableUpdatePosition),this.beforeShowCallback=a.beforeShow,this.afterShowCallback=a.afterShow,this.beforeHideCallback=a.beforeHide,this.afterHideCallback=a.afterHide,this.events={},this.$popover=x.getElement(this.target)}},{key:"setDefaultProps",value:function(a){return Object.assign({position:"auto",margin:8,offset:5,enterDelay:0,exitDelay:0,showDuration:300,hideDuration:200,transitionDistance:10,updatePositionThrottle:100,zIndex:1,hideOnOuterClick:!0,showOnHover:!1,hideArrowIcon:!1,disableManualAction:!1,disableUpdatePosition:!1},a)}},{key:"setPropsFromElementAttr",value:function(a){var f=a.ele;for(var O in k){var A=f.getAttribute(O);A&&(a[k[O]]=A)}}},{key:"setElementProps",value:function(){var a=this.$ele;a.popComp=this,a.show=b.showMethod,a.hide=b.hideMethod,a.updatePosition=b.updatePositionMethod,x.addClass(this.$ele,"pop-comp-ele"),x.addClass(this.$popover,"pop-comp-wrapper")}},{key:"getOtherTriggerPopComp",value:function(){var a,f=this.$popover.popComp;return f&&f.$ele!==this.$ele&&(a=f),a}},{key:"initPopper",value:function(){var a={$popperEle:this.$popover,$triggerEle:this.$ele,$arrowEle:this.$arrowEle,position:this.position,margin:this.margin,offset:this.offset,enterDelay:this.enterDelay,exitDelay:this.exitDelay,showDuration:this.showDuration,hideDuration:this.hideDuration,transitionDistance:this.transitionDistance,zIndex:this.zIndex,afterShow:this.afterShow.bind(this),afterHide:this.afterHide.bind(this)};this.popper=new PopperComponent(a)}},{key:"beforeShow",value:function(){typeof this.beforeShowCallback=="function"&&this.beforeShowCallback(this)}},{key:"beforeHide",value:function(){typeof this.beforeHideCallback=="function"&&this.beforeHideCallback(this)}},{key:"show",value:function(){this.isShown()||(this.isShownForOtherTrigger()?this.showAfterOtherHide():(x.addClass(this.$popover,"pop-comp-disable-events"),this.$popover.popComp=this,this.beforeShow(),this.popper.show({resetPosition:!0}),x.addClass(this.$ele,"pop-comp-active")))}},{key:"hide",value:function(){this.isShown()&&(this.beforeHide(),this.popper.hide(),this.removeScrollEventListeners(),this.removeResizeEventListeners())}},{key:"toggle",value:function(a){a===void 0&&(a=!this.isShown()),a?this.show():this.hide()}},{key:"isShown",value:function(){return x.hasClass(this.$ele,"pop-comp-active")}},{key:"isShownForOtherTrigger",value:function(){var a=this.getOtherTriggerPopComp();return!!a&&a.isShown()}},{key:"showAfterOtherHide",value:function(){var a=this,f=this.getOtherTriggerPopComp();if(f){var O=f.exitDelay+f.hideDuration+100;setTimeout(function(){a.show()},O)}}},{key:"afterShow",value:function(){var a=this;this.showOnHover?setTimeout(function(){x.removeClass(a.$popover,"pop-comp-disable-events")},2e3):x.removeClass(this.$popover,"pop-comp-disable-events"),this.disableUpdatePosition||(this.addScrollEventListeners(),this.addResizeEventListeners()),typeof this.afterShowCallback=="function"&&this.afterShowCallback(this)}},{key:"afterHide",value:function(){x.removeClass(this.$ele,"pop-comp-active"),typeof this.afterHideCallback=="function"&&this.afterHideCallback(this)}},{key:"renderArrow",value:function(){if(!this.hideArrowIcon){var a=this.$popover.querySelector(".pop-comp-arrow");a||(this.$popover.insertAdjacentHTML("afterbegin",'<i class="pop-comp-arrow"></i>'),a=this.$popover.querySelector(".pop-comp-arrow")),this.$arrowEle=a}}},{key:"destroy",value:function(){this.removeEvents()}}])&&u(h.prototype,m),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h;var h,m,v}();k=L.getAttrProps(),window.PopoverComponent=L}()}()})();
